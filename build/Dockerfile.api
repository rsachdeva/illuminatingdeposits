FROM golang:1.15.0-alpine AS build
WORKDIR /illuminatingdeposits
COPY go.mod .
RUN go mod download
COPY internal/ ./internal/
COPY cmd/interestrestapi ./cmd/interestrestapi
WORKDIR /illuminatingdeposits/cmd/interestrestapi
RUN go build

FROM alpine
RUN apk update
RUN apk add bash
WORKDIR /cmd
COPY --from=build /illuminatingdeposits/cmd/interestrestapi/interestrestapi .